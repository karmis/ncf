{% extends "::base.html.twig" %}

{% block top %}
    <nav class="navbar nc-top-navbar" role="navigation" id='top'>

        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#nc-nav-top">
                <span class="sr-only">
                    <a href="{{ path('nc_interface_index') }}" title="">
                        <img src="{{ asset('bundles/brainstrapcorenc/images/logo.png') }}" alt="" />
                    </a>
                </span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="{{ path('nc_interface_index') }}" title="">
                <img src="{{ asset('bundles/brainstrapcorenc/images/logo.png') }}" alt="" />
            </a>
        </div>

        <div class="collapse navbar-collapse" id="nc-nav-top">
    {#         <ul class="nav navbar-nav">
                <li class="active">
                    <a href="#">Home</a>
                </li>
                <li>
                    <a href="#">Link</a>
                </li>
                <li>
                    <a href="#">Link</a>
                </li>
            </ul> #}
            <p class="navbar-text navbar-right">
                <i class="fa fa-bell-o fa-5"></i>
            </p>
        </div>
    </nav>
    <div class="clearfix"></div>
{% endblock top %}

{% block sidebar %}
<div id="sidebar">
    {% block mainNav %}
        {% set user = app.security.getToken().getUser() %}
        <div id="mainNav" class="mainNav">
            <div class="user">
                <a title="" class="leftUserDrop">
                    {% if user.username is defined %}
                        <img src="{{ user.userAvatar.path | apply_filter('avatar_user')}}" />
                    {% endif %}
                    <span>
                        <strong>3</strong>
                    </span>
                </a>
                <span>
                    {% if user.username is defined %}
                        {{ user.username }}
                    {% endif %}
                </span>
                <ul class="leftUser list-unstyled">
                    <li>
                        <a href="#" title="" class="sProfile">Мой профиль</a>
                    </li>
                    <li>
                        <a href="#" title="" class="sMessages">Сообщения</a>
                    </li>
                    <li>
                        <a href="{{ path('nc_settings_index') }}" title="" class="sSettings">Настройки</a>
                    </li>
                    <li>
                        <a href="{{ path('fos_user_security_logout') }}" class="sLogout">Выход</a>
                    </li>
                </ul>
            </div>

            <!-- Responsive nav -->
            <div class="altNav">
                <div class="userSearch">
                    <form action="">
                        <input type="text" placeholder="search..." name="userSearch" />
                        <input type="submit" value="" />
                    </form>
                </div>

                <!-- User nav -->
                <ul class="userNav list-unstyled">
                    <li>
                        <a href="#" title="" class="profile"></a>
                    </li>
                    <li>
                        <a href="#" title="" class="messages"></a>
                    </li>
                    <li>
                        <a href="#" title="" class="settings"></a>
                    </li>
                    <li>
                        <a href="#" title="" class="logout"></a>
                    </li>
                </ul>
            </div>

            <!-- Main nav -->
            <ul class="nav list-unstyled">
                <li>
                    <a href="{{ path('nc_interface_index') }}" title="" class="active" style="text-align:center">
                        <i class="fa fa-pagelines fa-3x"></i>
                        <span>Мониторинг</span>
                    </a>
                </li>
                <li>
                    <a href="{{ path('nc_settings_index') }}" title="" class="active" style="text-align:center">
                        <i class="fa fa-wrench fa-3x"></i>
                        <span>Настройки</span>
                    </a>
                </li>
            </ul>
        </div>
    {% endblock mainNav %}
        
    {% block secNav %}

        <!-- Secondary nav -->
        <div class="secNav">
            <div class="secWrapper">
                <div class="secTop">
                    <div class="balance">
                        <div class="balInfo">
                            Инфа
                            <span>Ололо</span>
                        </div>
                        <div class="balAmount">
                            <span class="balBars">
                                <!--5,10,15,20,18,16,14,20,15,16,12,10--> </span>
                            <span>Бабло ???</span>
                        </div>
                    </div>
                    <a href="#" class="triangle-red"></a>
                </div>

                <ul class="nav nav-tabs">
                  <li class="active"><a href="#tab-sec-0-sessions" data-toggle="tab"><span class="fa fa-users fa-2"></span></a></li>
                  <li><a href="#tab-sec-0-tasks" data-toggle="tab"><span class="fa fa-tasks fa-2"></span></a></li>
                  <li><a href="#tab-sec-0-chat" data-toggle="tab"><span class="fa fa-comments-o fa-2"></span></a></li>
                </ul>

                <!-- Tab panes -->
                <div class="tab-content">
                    <div class="tab-pane fade in active" id="tab-sec-0-sessions">
                        <div class="text-center">
                            <p>
                                <button type="button" class="btn btn-success" data-toggle="modal" data-target="#modal-request-cart-for-search-by-code"> + </button>
                            </p>
                        </div>

                        <p>
                            <div class="text-center">
                                <div class="btn-group">
                                    <button type="button" class="btn btn-success dropdown-toggle" data-toggle="dropdown">
                                       Кнопка шлепка <span class="caret"></span>
                                    </button>
                                    <ul class="dropdown-menu" role="menu">
                                        <li><a data-toggle="modal" data-target="#modal-add-cart-with-client"><span class="fa fa-user fa-2 pull-left"></span>+ Клиент</a></li>
                                        <li><a data-toggle="modal" data-target="#modal-add-session-group"><span class="fa fa-users fa-2 pull-left"></span>+ Карта</a></li>
                                    </ul>
                                </div>
                            </div>

                        </p>

{#                         <p>
                            <div class="text-center">
                                <div class="btn-group">
                                    <button type="button" class="btn btn-success dropdown-toggle" data-toggle="dropdown">
                                        Добавить клиента<span class="caret"></span>
                                    </button>
                                    <ul class="dropdown-menu" role="menu">
                                        <li><a data-toggle="modal" data-target="#modal-add-session"><span class="fa fa-user fa-2 pull-left"></span>Персона</a></li>
                                        <li><a data-toggle="modal" data-target="#modal-add-session-group"><span class="fa fa-users fa-2 pull-left"></span>Группа</a></li>
                                    </ul>
                                </div>
                            </div>

                        </p> #}
                        
                        <div class="divider">
                            <span></span>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="tab-sec-0-tasks">
                      <p class="text-center">
                    {#                         <ul class="userList list-unstyled">
                            <li>
                                <a href="#" title="">
                                    <img src="{{ asset('bundles/brainstrapcorenc/images/live/face1.png')}}" alt="" />
                                    <span class="contactName"> <strong>Eugene Kopyov
                                            <span>(5)</span></strong>  <i>web &amp; ui designer</i>
                                    </span>
                                    <span class="status_away"></span>
                                    <span class="clear"></span>
                                </a>
                            </li>
                            <li>
                                <a href="#" title="">
                                    <img src="{{ asset('bundles/brainstrapcorenc/images/live/face2.png')}}" alt="" />
                                    <span class="contactName">
                                        <strong>Lucy Wilkinson
                                            <span>(12)</span></strong>  <i>Team leader</i>
                                    </span>
                                    <span class="status_off"></span>
                                    <span class="clear"></span>
                                </a>
                            </li>
                            <li>
                                <a href="#" title="">
                                    <img src="{{ asset('bundles/brainstrapcorenc/images/live/face3.png')}}" alt="" />
                                    <span class="contactName">
                                        <strong>John Dow</strong>
                                        <i>PHP developer</i>
                                    </span>
                                    <span class="status_available"></span>
                                    <span class="clear"></span>
                                </a>
                            </li>
                        </ul> #}
                        <div class="panel-group" id="accordion">
                          <div class="panel panel-default">
                            <div class="panel-heading">
                              <h4 class="panel-title">
                                <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne">
                                  Задача 1
                                </a>
                              </h4>
                            </div>
                            <div id="collapseOne" class="panel-collapse collapse">
                              <div class="panel-body">
                                Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
                              </div>
                            </div>
                          </div>
                          <div class="panel panel-default">
                            <div class="panel-heading">
                              <h4 class="panel-title">
                                <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo">
                                  Задача 2
                                </a>
                              </h4>
                            </div>
                            <div id="collapseTwo" class="panel-collapse collapse">
                              <div class="panel-body">
                                Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
                              </div>
                            </div>
                          </div>
                          <div class="panel panel-default">
                            <div class="panel-heading">
                              <h4 class="panel-title">
                                <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree">
                                  Задача 3
                                </a>
                              </h4>
                            </div>
                            <div id="collapseThree" class="panel-collapse collapse">
                              <div class="panel-body">
                                Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
                              </div>
                            </div>
                          </div>
                        </div>
                      </p>
                    </div>
                    <div class="tab-pane fade" id="tab-sec-0-chat">
                        <p>

                        </p>

                        <div class="divider">
                            <span></span>
                        </div>
                    </div>
                </div>
                <div class="clear"></div>
            </div>
        </div>
    {% endblock secNav %}
</div>
{% endblock sidebar %}



{% block content %}
<div id="content">
    {% block contentTop %}
    <div class="contentTop">
        <span class="pageTitle">
            <span class="icon-screen"></span>
            Мониторниг 
        </span>
        <ul class="quickStats list-unstyled">
            <li>
                <a href="" class="blueImg">
                    <img src="{{ asset('bundles/brainstrapcorenc/images/icons/quickstats/plus.png')}}" alt="" />
                </a>
                <div class="floatR">
                    <strong class="blue">0</strong>
                    <span>Сессий</span>
                </div>
            </li>
            <li>
                <a href="" class="redImg">
                    <img src="{{ asset('bundles/brainstrapcorenc/images/icons/quickstats/user.png')}}" alt="" />
                </a>
                <div class="floatR">
                    <strong class="blue">0</strong>
                    <span>Клиентов</span>
                </div>
            </li>
            <li>
                <a href="" class="greenImg">
                    <img src="{{ asset('bundles/brainstrapcorenc/images/icons/quickstats/money.png')}}" alt="" />
                </a>
                <div class="floatR">
                    <strong class="blue">0</strong>
                    <span>Заканчивают</span>
                </div>
            </li>
            <li>
                <a href="" class="greenImg">
                    <img src="{{ asset('bundles/brainstrapcorenc/images/icons/quickstats/money.png')}}" alt="" />
                </a>
                <div class="floatR">
                    <strong class="blue">0</strong>
                    <span>Денег в кассе</span>
                </div>
            </li>
        </ul>
        <div class="clear"></div>
    </div>
    {% endblock contentTop %}
       
    {% block breadLine %}
        <!-- Breadcrumbs line -->
        <div class="breadLine">
{#             <div class="bc">
                <ul id="breadcrumbs" class="breadcrumbs list-unstyled">
                    <li>
                        <a href="#">Dashboard</a>
                    </li>
                    <li>
                        <a href="#">UI elements</a>
                        <ul class="list-unstyled">
                            <li>
                                <a href="ui.html" title="">General elements</a>
                            </li>
                            <li>
                                <a href="ui_icons.html" title="">Icons</a>
                            </li>
                            <li>
                                <a href="ui_buttons.html" title="">Button sets</a>
                            </li>
                            <li>
                                <a href="ui_custom.html" title="">Custom elements</a>
                            </li>
                            <li>
                                <a href="ui_experimental.html" title="">Experimental</a>
                            </li>
                        </ul>
                    </li>
                    <li class="current">
                        <a href="ui_grid.html" title="">Grid</a>
                    </li>
                </ul>
            </div>

            <div class="breadLinks">
                <ul class="list-unstyled">
                    <li>
                        <a href="#" title="">
                            <i class="icos-list"></i>
                            <span>Orders</span>
                            <strong>(+58)</strong>
                        </a>
                    </li>
                    <li>
                        <a href="#" title="">
                            <i class="icos-check"></i>
                            <span>Tasks</span>
                            <strong>(+12)</strong>
                        </a>
                    </li>
                    <li class="has">
                        <a title="">
                            <i class="icos-money3"></i>
                            <span>Invoices</span>
                            <span>
                                <img src="{{ asset('bundles/brainstrapcorenc/images/elements/control/hasddArrow.png')}}" alt="" />
                            </span>
                        </a>
                        <ul class="list-unstyled">
                            <li>
                                <a href="#" title="">
                                    <span class="icos-add"></span>
                                    New invoice
                                </a>
                            </li>
                            <li>
                                <a href="#" title="">
                                    <span class="icos-archive"></span>
                                    History
                                </a>
                            </li>
                            <li>
                                <a href="#" title="">
                                    <span class="icos-printer"></span>
                                    Print invoices
                                </a>
                            </li>
                        </ul>
                    </li>
                </ul>
                <div class="clear"></div>
            </div> #}
        </div>
    {% endblock breadLine %}
        
        {% block wrapper %}
    <!-- Main content -->
    <div class="wrapper">
        <ul class="middleNavR list-unstyled">
            <li>
                <a href="#" title="Add an article" class="tipN">
                    <img src="{{ asset('bundles/brainstrapcorenc/images/icons/middlenav/create.png')}}" alt="" />
                </a>
            </li>
            <li>
                <a href="#" title="Upload files" class="tipN">
                    <img src="{{ asset('bundles/brainstrapcorenc/images/icons/middlenav/upload.png')}}" alt="" />
                </a>
            </li>
            <li>
                <a href="#" title="Add something" class="tipN">
                    <img src="{{ asset('bundles/brainstrapcorenc/images/icons/middlenav/add.png')}}" alt="" />
                </a>
            </li>
            <li>
                <a href="#" title="Messages" class="tipN">
                    <img src="{{ asset('bundles/brainstrapcorenc/images/icons/middlenav/dialogs.png')}}" alt="" />
                </a>
                <strong>8</strong>
            </li>
            <li>
                <a href="#" title="Check statistics" class="tipN">
                    <img src="{{ asset('bundles/brainstrapcorenc/images/icons/middlenav/stats.png')}}" alt="" />
                </a>
            </li>
        </ul>

        <!-- 6 + 6 -->
        <div class="fluid">

            <!-- Messages #1 -->
            <div class="widget grid12">
                <div class="whead">
                    <h6>Messages layout #1</h6>
                    <div class="on_off">
                        <span class="icon-reload-CW"></span>
                        <input type="checkbox" id="check1" checked="checked" name="chbox" />
                    </div>
                    <div class="clear"></div>
                </div>

                <ul class="messagesOne list-unstyled">
                    <li class="by_user">
                        <a href="#" title="">
                            <img src="{{ asset('bundles/brainstrapcorenc/images/live/face1.png')}}" alt="" />
                        </a>
                        <div class="messageArea">
                            <span class="aro"></span>
                            <div class="infoRow">
                                <span class="name">
                                    <strong>John</strong>
                                    says:
                                </span>
                                <span class="time">3 hours ago</span>
                                <div class="clear"></div>
                            </div>
                            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam vel est enim, vel eleifend felis. Ut volutpat, leo eget euismod scelerisque, eros purus lacinia velit, nec rhoncus mi dui eleifend orci. 
                                    Phasellus ut sem urna, id congue libero. Nulla eget arcu vel massa suscipit ultricies ac id velit
                        </div>
                        <div class="clear"></div>
                    </li>

                    <li class="divider">
                        <span></span>
                    </li>

                    <li class="by_me">
                        <a href="#" title="">
                            <img src="{{ asset('bundles/brainstrapcorenc/images/live/face2.png')}}" alt="" />
                        </a>
                        <div class="messageArea">
                            <span class="aro"></span>
                            <div class="infoRow">
                                <span class="name">
                                    <strong>Eugene</strong>
                                    says:
                                </span>
                                <span class="time">3 hours ago</span>
                                <div class="clear"></div>
                            </div>
                            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam vel est enim, vel eleifend felis. Ut volutpat, leo eget euismod scelerisque, eros purus lacinia velit, nec rhoncus mi dui eleifend orci. 
                                    Phasellus ut sem urna, id congue libero. Nulla eget arcu vel massa suscipit ultricies ac id velit
                        </div>
                        <div class="clear"></div>
                    </li>

                    <li class="by_me">
                        <a href="#" title="">
                            <img src="{{ asset('bundles/brainstrapcorenc/images/live/face2.png')}}" alt="" />
                        </a>
                        <div class="messageArea">
                            <span class="aro"></span>
                            <div class="infoRow">
                                <span class="name">
                                    <strong>Eugene</strong>
                                    says:
                                </span>
                                <span class="time">3 hours ago</span>
                                <div class="clear"></div>
                            </div>
                            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam vel est enim, vel eleifend felis. Ut volutpat, leo eget euismod scelerisque, eros purus lacinia velit, nec rhoncus mi dui eleifend orci. 
                                    Phasellus ut sem urna, id congue libero. Nulla eget arcu vel massa suscipit ultricies ac id velit
                        </div>
                        <div class="clear"></div>
                    </li>

                    <li class="divider">
                        <span></span>
                    </li>

                    <li class="by_user">
                        <a href="#" title="">
                            <img src="{{ asset('bundles/brainstrapcorenc/images/live/face1.png')}}" alt="" />
                        </a>
                        <div class="messageArea">
                            <span class="aro"></span>
                            <div class="infoRow">
                                <span class="name">
                                    <strong>John</strong>
                                    says:
                                </span>
                                <span class="time">3 hours ago</span>
                                <div class="clear"></div>
                            </div>
                            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam vel est enim, vel eleifend felis. Ut volutpat, leo eget euismod scelerisque, eros purus lacinia velit, nec rhoncus mi dui eleifend orci. 
                                    Phasellus ut sem urna, id congue libero. Nulla eget arcu vel massa suscipit ultricies ac id velit
                        </div>
                        <div class="clear"></div>
                    </li>

                    <li class="divider">
                        <span></span>
                    </li>

                    <li class="by_me">
                        <a href="#" title="">
                            <img src="{{ asset('bundles/brainstrapcorenc/images/live/face2.png')}}" alt="" />
                        </a>
                        <div class="messageArea">
                            <span class="aro"></span>
                            <div class="infoRow">
                                <span class="name">
                                    <strong>Eugene</strong>
                                    says:
                                </span>
                                <span class="time">3 hours ago</span>
                                <div class="clear"></div>
                            </div>
                            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam vel est enim, vel eleifend felis. Ut volutpat, leo eget euismod scelerisque, eros purus lacinia velit, nec rhoncus mi dui eleifend orci. 
                                    Phasellus ut sem urna, id congue libero. Nulla eget arcu vel massa suscipit ultricies ac id velit
                        </div>
                        <div class="clear"></div>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <!-- Main content ends -->{% endblock wrapper %}</div>
{% endblock content %}

{# 1) Запрашивает карту по коду - OK #}
{% block modal_request_cart %}
    <div class="modal fade" id="modal-request-cart-for-search-by-code" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="modal-request-cart-for-search-by-code-title" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title" id="modal-request-cart-for-search-by-code-title">Введите номер карты</h4>
          </div>
          <div class="modal-body">
            {{ form_start(cartCodeForm, { 'attr': {'class': 'form-horizontal', 'id': 'form-request-cart', 'role': 'form' } }) }}
                
                <div class="form-group">
                    <label for="article" class="col-md-2 control-label">Номер:</label>
                    <div class="col-md-10">
                        {{ form_widget(cartCodeForm.code, { 'attr': {'class': 'form-control validate-code', 'placeholder': 'Введите номер карты'} }) }}
                        <div class="inputErrors">
                            {{ form_errors(cartCodeForm.code) }}
                        </div>
                    </div>
                </div>
                
                {{ form_rest(cartCodeForm) }}
            {{ form_end(cartCodeForm) }}
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-danger btn-sm" data-dismiss="modal">Закрыть</button>
            <button type="button" class="btn btn-success" bs-nc-action="search-req-cart">Найти</button>
          </div>
        </div>
      </div>
    </div>
{% endblock modal_request_cart %}

{# 2) Запрашивает карту по коду - OK #}
{% block modal_request_wait %}
    <div class="modal fade" id="modal-request-wait" data-backdrop="static" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
{#           <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title" id="modal-request-cart-title">Добавить клиента</h4>
          </div> #}
          <div class="modal-body">
                Ждите...
          </div>
{#           <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Закрыть</button>
            <button type="button" class="btn btn-primary">Сохранить</button>
          </div> #}
        </div>
      </div>
    </div>
{% endblock modal_request_wait %}


{% block modal_add_cart_with_client %}
    <div class="modal fade" id="modal-add-cart-with-client" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="modal-add-cart-with-client" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title" id="modal-add-cart-with-client-title">Создание нового клиента</h4>
          </div>
          <div class="modal-body">

            
            {# Форма создания клиента #}
            {{ form_start(clientForm, { 'attr': {'class': 'form-horizontal', 'id': 'form-add-cart-with-client-client', 'role': 'form' } }) }}
                
                {{ form_widget(clientForm.cart_id) }}
                
                <div class="form-group">
                    <label for="article" class="col-md-2 control-label">Имя:</label>
                    <div class="col-md-10">
                        {{ form_widget(clientForm.name, { 'attr': {'class': 'form-control validate-name', 'placeholder': 'Имя'} }) }}
                        <div class="inputErrors">
                            {{ form_errors(clientForm.name) }}
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="article" class="col-md-2 control-label">Фамилия:</label>
                    <div class="col-md-10">
                        {{ form_widget(clientForm.sname, { 'attr': {'class': 'form-control validate-sname', 'placeholder': 'Фамилия'} }) }}
                        <div class="inputErrors">
                            {{ form_errors(clientForm.sname) }}
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="article" class="col-md-2 control-label">День рождения:</label>
                    <div class="col-md-10">
                        {{ form_widget(clientForm.birthday, { 'attr': {'class': 'form-control validate-birthday', 'placeholder': 'День рождения'} }) }}
                        <div class="inputErrors">
                            {{ form_errors(clientForm.birthday) }}
                        </div>
                    </div>
                </div>
                
                {{ form_rest(clientForm) }}
            {{ form_end(clientForm) }}
            

            <div class="clearfix"></div>
            

            {# Форма создания карты #}
            {{ form_start(cartForm, { 'attr': {'class': 'form-horizontal', 'id': 'form-add-cart-with-client-cart', 'role': 'form' } }) }}


                <div class="form-group">
                    <label class="col-md-2 control-label">Номер:</label>
                    <div class="col-md-10">
                        {{ form_widget(cartForm.code, { 'attr': {'class': 'form-control validate-code', 'placeholder': 'Введите номер карты'} }) }}
                        <div class="inputErrors">
                            {{ form_errors(cartForm.code) }}
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="col-md-2 control-label">Тип:</label>
                    <div class="col-md-10">
                        {{ form_widget(cartForm.type, { 'attr': {'class': 'form-control validate-type', 'placeholder': 'Выберите тип карты'} }) }}
                        <div class="inputErrors">
                            {{ form_errors(cartForm.type) }}
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="col-md-2 control-label">Секретное слово:</label>
                    <div class="col-md-10">
                        {{ form_widget(cartForm.keyword, { 'attr': {'class': 'form-control validate-keyword', 'placeholder': 'Секретное слово'} }) }}
                        <div class="inputErrors">
                            {{ form_errors(cartForm.keyword) }}
                        </div>
                    </div>
                </div>
                
                {{ form_rest(cartForm) }}
            {{ form_end(cartForm) }}

          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-danger btn-sm" data-dismiss="modal">Закрыть</button>
            <button type="button" class="btn btn-success" bs-nc-action="add-cart-with-client">Создать клиента</button>
          </div>
        </div>
      </div>
    </div>
{% endblock modal_add_cart_with_client %}


{# {% block modal_add_client %}
    <div class="modal fade" id="modal-add-client" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="modal-add-client-title" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title" id="modal-add-client-title">Добавить клиента</h4>
          </div>
          <div class="modal-body">

          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Закрыть</button>
            <button type="button" class="btn btn-primary">Сохранить</button>
          </div>
        </div>
      </div>
    </div>
{% endblock modal_add_client %} #}

{# {% block modal_add_session %}
    <div class="modal fade" id="modal-add-session" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="modal-add-session-title" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title" id="modal-add-session-title">Добавить сессию</h4>
          </div>
          <div class="modal-body">

          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Закрыть</button>
            <button type="button" class="btn btn-primary">Сохранить</button>
          </div>
        </div>
      </div>
    </div>
{% endblock modal_add_session %} #}

{% block modal_add_session %}
    <div class="modal fade" id="modal-add-session" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="modal-add-session-title" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title" id="modal-add-session-title">Добавить сессию</h4>
          </div>
          <div class="modal-body">
            {# Personal session #}
            <ul class="nav nav-tabs">
              <li class="active"><a href="#tab-modal-personal-session" data-toggle="tab"><span class="fa fa-user fa-2"></span></a></li>
              <li><a href="#tab-modal-group-session" data-toggle="tab"><span class="fa fa-users fa-2"></span></a></li>
            </ul>

            <!-- Tab panes -->
            <div class="tab-content">
                <div class="tab-pane fade in active" id="tab-modal-personal-session">
                    <div class="">
                        <p>
                            {{ form_start(personalSessionForm, { 'attr': {'class': 'form-horizontal', 'id': 'form-modal-add-personal-session', 'role': 'form' } }) }}
                                {{ form_widget(personalSessionForm.cart_id) }}
                                {{ form_widget(personalSessionForm.client_id) }}
                                <h2> Сессия для персоны </h2>
                                  <div class="form-group">
                                    <label for="inputEmail3" class="col-sm-2 control-label">Email</label>
                                    <div class="col-sm-10">
                                      <input type="email" class="form-control" id="inputEmail3" placeholder="Email">
                                    </div>
                                  </div>
                                  <div class="form-group">
                                    <label for="inputPassword3" class="col-sm-2 control-label">Password</label>
                                    <div class="col-sm-10">
                                      <input type="password" class="form-control" id="inputPassword3" placeholder="Password">
                                    </div>
                                  </div>
                                  <div class="form-group">
                                    <div class="col-sm-offset-2 col-sm-10">
                                      <div class="checkbox">
                                        <label>
                                          <input type="checkbox"> Remember me
                                        </label>
                                      </div>
                                    </div>
                                  </div>
                                  <div class="form-group">
                                    <div class="col-sm-offset-2 col-sm-10">
                                      <button type="submit" class="btn btn-default">Sign in</button>
                                    </div>
                                  </div>

                                {{ form_rest(personalSessionForm) }}
                            {{ form_end(personalSessionForm) }}
                            {# <button type="button" class="btn btn-success" data-toggle="modal" data-target="#modal-request-cart-for-search-by-code"> + </button> #}
                        </p>
                    </div>
                </div>

                <div class="tab-pane fade" id="tab-modal-group-session">
                    <div class="">
                        <p>
                            {{ form_start(groupSessionForm, { 'attr': {'class': 'form-horizontal', 'id': 'form-modal-add-group-session', 'role': 'form' } }) }}
                                {{ form_widget(groupSessionForm.cart_id) }}
                                {{ form_widget(personalSessionForm.client_id) }}
                                <h2> Сессия для группы </h2>
                                  <div class="form-group">
                                    <label for="inputEmail3" class="col-sm-2 control-label">Email</label>
                                    <div class="col-sm-10">
                                      <input type="email" class="form-control" id="inputEmail3" placeholder="Email">
                                    </div>
                                  </div>
                                  <div class="form-group">
                                    <label for="inputPassword3" class="col-sm-2 control-label">Password</label>
                                    <div class="col-sm-10">
                                      <input type="password" class="form-control" id="inputPassword3" placeholder="Password">
                                    </div>
                                  </div>
                                  <div class="form-group">
                                    <div class="col-sm-offset-2 col-sm-10">
                                      <div class="checkbox">
                                        <label>
                                          <input type="checkbox"> Remember me
                                        </label>
                                      </div>
                                    </div>
                                  </div>
                                  <div class="form-group">
                                    <div class="col-sm-offset-2 col-sm-10">
                                      <button type="submit" class="btn btn-default">Sign in</button>
                                    </div>
                                  </div>
                                {{ form_rest(groupSessionForm) }}
                            {{ form_end(groupSessionForm) }}
                        </p>
                    </div>
                </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Закрыть</button>
            <button type="button" class="btn btn-primary">Сохранить</button>
          </div>
        </div>
      </div>
    </div>
{% endblock modal_add_session %}

{# {% block modal_add_session_group %}
    <div class="modal fade" id="modal-add-session-group" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="modal-add-session-group-title" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title" id="modal-add-session-group-title">Добавить сессию для группы</h4>
          </div>
          <div class="modal-body">
            ...
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Закрыть</button>
            <button type="button" class="btn btn-primary">Сохранить</button>
          </div>
        </div>
      </div>
    </div>
{% endblock modal_add_session_group %} #}

{% block stylesheets %}
    {{ parent() }}
    {# {{ form_stylesheet(personalSessionType) }} #}

{% endblock stylesheets %}

{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript">
        $(function()
        {
            // Request for search bys number cart
            window.bs.nc.functions.submitAjaxForm(
                $("[bs-nc-action='search-req-cart']"),
                $("form#form-request-cart"),
                "{{ path('cart_search') }}", 
                {
                    before: function(){
                        debugger;
                        $("#modal-request-cart-for-search-by-code").modal('hide');
                        // $("#modal-request-wait").modal("toggle");
                    },
                    // Add Session
                    200: function(json){
                        debugger;
                        var entityCart      = $.parseJSON(json.entityCart);
                        var entityClient    = $.parseJSON(json.entityClient);
                        
                        $("#modal-add-session").modal('show');
                        $("#brainstrap_core_ncbundle_session_personalsession_cart_id").val(entityCart.id);
                        $("#brainstrap_core_ncbundle_session_groupsession_cart_id").val(entityCart.id);
                        
                        window.bs.nc.functions.submitAjaxForm(
                            "null",
                            $("form#form-modal-add-session"),
                            "{{ path('session_personalsession_create') }}",
                            {
                                // Create session
                                200: function(json){
                                    var entity = $.parseJSON(json.entity);
                                    // Show info about cart
                                    debugger;
                                    alert("user with name" + entity.name + "successfully created");
                                },
                                after: function(){
                                    alert('Success');
                                }
                            }
                        );

                    },
                    404: function(json){
                        debugger;

                        // Создаем нового клиента вместе с картой
                        $('#modal-add-cart-with-client').modal('show');
                        $('#brainstrap_core_ncbundle_cart_cart_code').val(json.entity.code);
                        // $("#modal-request-wait").modal("toggle");
                        // alert(json.msg);
                    },
                    500: function(json){
                        alert(json.msg);
                    }

                }
            );

            // Create cart and user and session
            // create cart
            window.bs.nc.functions.submitAjaxForm(
                $("[bs-nc-action='add-cart-with-client']"),
                $("form#form-add-cart-with-client-cart"),
                "{{ path('cart_create') }}", 
                {
                    // before: function(){
                    //     debugger;
                    //     $("#modal-request-cart-for-search-by-code").modal('hide');
                    //     // $("#modal-request-wait").modal("toggle");
                    // },
                    // Create user
                    200: function(json){
                        debugger;
                        if(json.responseCode == 200) {

                            $('#brainstrap_core_ncbundle_client_client_cart_id').val(json.id)
                            window.bs.nc.functions.submitAjaxForm(
                                null,
                                $("form#form-add-cart-with-client-client"),
                                "{{ path('client_create') }}",
                                {
                                    // Create session
                                    200: function(json){
                                        var entity = $.parseJSON(json.entity);
                                        // Show info about cart
                                        debugger;
                                        alert("user with name" + entity.name + "successfully created");
                                    },
                                    after: function(){
                                        alert('Success');
                                    }
                                }
                            );
                        }
                    },
                    404: function(json){
                        debugger;

                        // Создаем нового клиента вместе с картой
                        $('#modal-add-cart-with-client').modal('show');
                        $('#brainstrap_core_ncbundle_cart_cart_code').val(json.entity.code);
                        // $("#modal-request-wait").modal("toggle");
                        // alert(json.msg);
                    },
                    500: function(json){
                        alert(json.msg);
                    }

                }
            );
        });
            
            
    </script>
    {# {{ form_javascript(personalSessionType) }} #}
{% endblock javascripts %}